<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>huh yunjin is loved ‚ÇäÀö‡∑Ü‚äπ‚Çä ‚ãÜ</title>

    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root { 
            --bg-ocean: #e0f2fe; 
            --jellyfish-blue: #7dd3fc;
            --deep-sea: #0369a1;
            --white: #ffffff;
            --red: #fb7185; 
        }

        /* ========= Base ========= */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            background: var(--bg-ocean);
            color: var(--deep-sea);
            transition: .3s;
        }
        body.dark {
            background: #0c1e2d;
            color: #bae6fd;
        }

        /* ========= Header ========= */
        header {
            text-align: center;
            padding: 40px 20px;
        }
        header h2 { margin: 0; font-size: 2rem; letter-spacing: -1px; }

        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        input {
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid var(--jellyfish-blue);
            outline: none;
            width: 250px;
        }

        button.toggle {
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            background: var(--jellyfish-blue);
            color: var(--deep-sea);
            font-size: 18px;
        }

        /* ========= Grid Pinterest ========= */
        .grid { margin: 0 auto; visibility: hidden; }

        .grid-item {
            width: 236px;
            margin-bottom: 20px;
            border-radius: 20px;
            overflow: hidden;
            background: var(--white);
            cursor: pointer;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: .3s;
        }
        .grid-item:hover { transform: translateY(-6px); }
        .grid-item img { width: 100%; display: block; }

        .overlay {
            position: absolute;
            inset: 0;
            background: rgba(3, 105, 161, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            opacity: 0;
            transition: .2s;
        }
        .grid-item:hover .overlay { opacity: 1; }

        /* ========= Modal ========= */
        #modal {
            position: fixed;
            inset: 0;
            display: none;
            justify-content: center;
            align-items: center;
            background: rgba(12, 30, 45, 0.8);
            backdrop-filter: blur(8px);
            z-index: 999;
            padding: 20px;
        }

        .modal-box {
            width: 100%;
            max-width: 900px;
            max-height: 85vh;
            background: var(--white);
            border-radius: 30px;
            display: flex;
            overflow: hidden;
            position: relative;
        }
        body.dark .modal-box { background: #1e293b; color: white; }

        .modal-left { flex: 1.2; background: #000; display: flex; align-items: center; }
        .modal-left img { width: 100%; height: 100%; object-fit: contain; }
        .modal-right { flex: 1; padding: 35px; overflow-y: auto; position: relative; }

        .close { position: absolute; top: 15px; right: 20px; font-size: 30px; cursor: pointer; color: #94a3b8; }

        .btn-like {
            background: var(--red);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* Heart Animation */
        @keyframes pop {
            0% { transform: scale(.5); opacity: 0 }
            50% { transform: scale(1.5); opacity: 1 }
            100% { transform: translateY(-60px); opacity: 0 }
        }
        .heart-pop {
            position: absolute;
            font-size: 35px;
            animation: pop .8s forwards;
            pointer-events: none;
            z-index: 10;
        }

        .loading { text-align: center; padding: 50px; font-size: 1.2rem; }
    </style>
</head>
<body>

<header>
    <h2>huh yunjin is loved ‚ÇäÀö‡∑Ü‚äπ‚Çä ‚ãÜ ü™º</h2>
    <div class="controls">
        <input id="search" placeholder="T√¨m ki·∫øm Yunjin...">
        <button id="toggleBtn" class="toggle">üåô</button>
    </div>
</header>

<div id="loading" class="loading">üåä ƒêang l·∫∑n xu·ªëng bi·ªÉn t√¨m ·∫£nh...</div>
<div id="grid" class="grid"></div>

<div id="modal">
    <div class="modal-box">
        <span class="close" id="closeBtn">&times;</span>
        <div class="modal-left"><img id="m-img"></div>
        <div class="modal-right" id="modal-right">
            <button id="likeBtn" class="btn-like"></button>
            <h3 id="m-title"></h3>
            <div id="m-desc"></div>
        </div>
    </div>
</div>

<script>
/* ========= CONFIG ========= */
const API_URL = 'https://script.google.com/macros/s/AKfycbyRGBxB-7kvLkfEFeqYfki6T60LfGKvuCrZLfacGh88DqQYsrY7Ye0S2dB_0Fa1nGiBVg/exec';

/* ========= STATE ========= */
let allData = [];
let page = 0;
const size = 15;
let masonry;
let currentItem = null;

const gridEl = document.getElementById('grid');
const searchEl = document.getElementById('search');
const loadingEl = document.getElementById('loading');
const modalEl = document.getElementById('modal');
const toggleBtn = document.getElementById('toggleBtn');

/* ========= FETCH DATA ========= */
async function load() {
    try {
        const res = await fetch(API_URL);
        allData = await res.json();
        
        initMasonry();
        loadMore();
    } catch (e) {
        loadingEl.innerHTML = "‚ùå Kh√¥ng th·ªÉ k·∫øt n·ªëi v·ªõi ƒë·∫°i d∆∞∆°ng (API L·ªói)";
    }
}

/* ========= MASONRY ========= */
function initMasonry() {
    masonry = new Masonry(gridEl, {
        itemSelector: '.grid-item',
        columnWidth: 236,
        gutter: 20,
        fitWidth: true
    });
    gridEl.style.visibility = 'visible';
    loadingEl.style.display = 'none';
}

/* ========= FILTER & LOAD ========= */
function getFilteredData() {
    const q = (searchEl.value || '').toLowerCase();
    return q ? allData.filter(x => (x.title || '').toLowerCase().includes(q)) : allData;
}

function loadMore() {
    const list = getFilteredData();
    if (page * size >= list.length) return;

    const chunk = list.slice(page * size, (page + 1) * size);
    page++;

    chunk.forEach(item => {
        const el = document.createElement('div');
        el.className = 'grid-item';
        el.innerHTML = `
            <img src="${item.imageUrl}" loading="lazy">
            <div class="overlay">‚ù§Ô∏è ${item.likes || 0}</div>
        `;
        el.onclick = () => openModal(item);
        gridEl.
