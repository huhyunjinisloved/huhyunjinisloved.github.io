<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>huh yunjin is loved ₊˚ෆ⊹₊ ⋆</title>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --pink: #ffdae0; --red: #e60023; }
        body { font-family: -apple-system, sans-serif; margin: 0; background: #fff; }
        header { text-align: center; padding: 40px 20px; font-size: 30px; font-weight: bold; letter-spacing: -1px; }
        .grid { margin: 0 auto; visibility: hidden; }
        .grid-item { width: 236px; margin-bottom: 20px; border-radius: 16px; cursor: zoom-in; overflow: hidden; background: #fff; transition: 0.3s; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .grid-item:hover { transform: scale(1.02); }
        .grid-item img { width: 100%; display: block; border-radius: 16px; }
        
        /* Modal Popup */
        #modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(8px); }
        .modal-content { background: white; width: 90%; max-width: 900px; max-height: 90vh; border-radius: 32px; display: flex; overflow: hidden; position: relative; animation: zoom 0.3s ease; }
        @keyframes zoom { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal-left { flex: 1.2; background: #000; display: flex; align-items: center; justify-content: center; }
        .modal-left img { max-width: 100%; max-height: 90vh; }
        .modal-right { flex: 1; padding: 40px; display: flex; flex-direction: column; overflow-y: auto; position: relative; }
        .modal-title { font-size: 26px; font-weight: bold; margin-bottom: 15px; }
        .modal-desc { font-size: 16px; line-height: 1.6; color: #333; }
        .close-btn { position: absolute; top: 20px; right: 25px; font-size: 35px; cursor: pointer; color: #333; z-index: 10; }
        .btn-like { background: var(--red); color: white; border: none; padding: 12px 25px; border-radius: 25px; font-weight: bold; cursor: pointer; align-self: flex-start; margin-bottom: 20px; }
        
        @media (max-width: 750px) { .modal-content { flex-direction: column; } .modal-right { padding: 20px; } }
    </style>
</head>
<body>

<header>huh yunjin is loved ₊˚ෆ⊹₊ ⋆</header>
<div class="grid" id="main-grid"></div>

<div id="modal-overlay">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <div class="modal-content" onclick="event.stopPropagation()">
        <div class="modal-left"><img id="modal-img" src=""></div>
        <div class="modal-right">
            <button class="btn-like" id="modal-like-btn"></button>
            <div id="modal-title" class="modal-title"></div>
            <hr style="border: 0.5px solid #eee; width: 100%;">
            <div id="modal-desc" class="modal-desc"></div>
        </div>
    </div>
</div>

<script>
    // DÁN LINK API CỦA BẠN VÀO ĐÂY
    const API_URL = 'https://script.google.com/macros/s/AKfycbyjen9m8-qdUC19LgEwpbXzZatm6W7s_Vi0IzImPbpuXiFZ6k2w5Sae6emG1b23Zk81jg/exec';

    async function loadData() {
        const res = await fetch(API_URL);
        const data = await res.json();
        const grid = document.getElementById('main-grid');
        
        data.forEach(item => {
            const div = document.createElement('div');
            div.className = 'grid-item';
            div.innerHTML = `<img src="${item.imageUrl}">`;
            div.onclick = () => openModal(item);
            grid.appendChild(div);
        });

        const msnry = new Masonry(grid, { itemSelector: '.grid-item', columnWidth: 236, gutter: 20, isFitWidth: true });
        imagesLoaded(grid, () => { grid.style.visibility = 'visible'; msnry.layout(); });
    }

    function openModal(item) {
        document.getElementById('modal-img').src = item.imageUrl;
        document.getElementById('modal-title').innerText = item.title;
        document.getElementById('modal-desc').innerHTML = item.description;
        const btn = document.getElementById('modal-like-btn');
        btn.innerHTML = `<i class="fa-solid fa-heart"></i> ${item.likes}`;
        btn.onclick = () => {
            btn.disabled = true; btn.style.opacity = 0.5;
            fetch(API_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({id: item.id}) });
        };
        document.getElementById('modal-overlay').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        document.getElementById('modal-overlay').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    window.onclick = (e) => { if(e.target == document.getElementById('modal-overlay')) closeModal(); }
    loadData();
</script>
</body>
</html>
